<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Journey Planner</title>
<style>
:root{--accent:#2563eb;--card:#fff;--bg:#f3f6fb;--text:#111;}
[data-theme="dark"]{--accent:#0ea5e9;--card:#1e293b;--bg:#0f172a;--text:#f1f5f9;}
body{margin:0;font-family:'Segoe UI',Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);transition:.3s;}
button{cursor:pointer;border:none;border-radius:8px;padding:8px 12px;font-weight:600;transition:.2s;}
button:hover{opacity:.9;}
header{display:flex;justify-content:space-between;align-items:center;padding:16px;background:linear-gradient(90deg,var(--accent),#06b6d4);color:#fff;flex-wrap:wrap;}
h1{margin:0;font-size:22px;}
.container{max-width:960px;margin:20px auto;padding:0 16px;}
.card{background:var(--card);border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 6px 18px rgba(0,0,0,0.08);}
input,textarea,select{padding:8px;border-radius:8px;border:1px solid #ccc;font-size:14px;width:100%;}
textarea{resize:vertical;}
.task-row{display:flex;align-items:center;gap:8px;margin-bottom:6px;}
.task-row .num{width:26px;font-weight:700;}
.hidden{display:none;}
.theme-toggle{background:#fff;color:#111;}
.add-btn{background:var(--accent);color:#fff;border-radius:10px;padding:6px 14px;margin-top:8px;font-size:14px;}
.add-btn:hover{background:#1e40af;}
#brand-btn{position:fixed;bottom:12px;right:18px;font-weight:700;font-size:14px;background:var(--accent);color:#fff;border-radius:50px;padding:8px 14px;box-shadow:0 4px 10px rgba(0,0,0,0.3);}
#creator-modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;visibility:hidden;opacity:0;transition:.3s;}
#creator-modal.active{visibility:visible;opacity:1;}
.modal-card{background:var(--card);padding:30px;border-radius:20px;text-align:center;box-shadow:0 6px 20px rgba(0,0,0,0.4);}
.modal-card h2{margin:0;font-size:22px;color:var(--accent);}
.modal-card p{margin-top:8px;font-size:18px;font-weight:600;}
</style>
</head>
<body data-theme="light">

<header>
  <h1 id="journey-title">ðŸŒŸ Start Journey of Your Success</h1>
  <button onclick="toggleTheme()" class="theme-toggle">Toggle Theme</button>
</header>

<div class="container" id="landing-page">
  <div class="card">
    <h2>Welcome! Ready to start your journey?</h2>
    <p>Set your start and end date, then choose your planner view.</p>
    <button onclick="showDateSelection()">Start Now ðŸš€</button>
  </div>
</div>

<div class="container hidden" id="date-selection-page">
  <div class="card">
    <h2>Choose your journey period</h2>
    <label>Start Date:</label>
    <input type="date" id="start-date"/>
    <label>End Date:</label>
    <input type="date" id="end-date"/>
    <label>View Mode:</label>
    <select id="view-mode">
      <option value="week">Week-wise</option>
      <option value="day">Day-wise</option>
    </select>
    <button onclick="generatePlanner()">Continue</button>
  </div>
</div>

<div class="container hidden" id="planner-page">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:10px;">
    <div id="today-display"></div>
    <div id="total-display" style="font-weight:600;"></div>
  </div>
  <main id="planner"></main>
  <nav style="margin-top:20px;display:flex;gap:10px;justify-content:center;">
    <button onclick="exportToWord()">ðŸ“„ Export Word</button>
    <button onclick="exportToPDF()">ðŸ“˜ Export PDF</button>
    <button onclick="resetAll()">ðŸ§¹ Reset</button>
  </nav>
</div>

<!-- Brand -->
<div id="brand-btn" onclick="openCreator()">tsr</div>

<!-- Modal -->
<div id="creator-modal" onclick="closeCreator(event)">
  <div class="modal-card">
    <h2>âœ¨ Created by</h2>
    <p>Tushar Waghmare</p>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script>
let plannerData={months:[]};
let viewMode="week";
let journeyTitle="Start Journey of Your Success";

function toggleTheme(){
  const t=document.body.getAttribute("data-theme");
  document.body.setAttribute("data-theme",t==="light"?"dark":"light");
}

function showDateSelection(){
  document.getElementById("landing-page").classList.add("hidden");
  document.getElementById("date-selection-page").classList.remove("hidden");
}

function generatePlanner(){
  const sd=document.getElementById("start-date").value;
  const ed=document.getElementById("end-date").value;
  viewMode=document.getElementById("view-mode").value;
  if(!sd||!ed){alert("Please select start and end dates.");return;}
  const start=new Date(sd),end=new Date(ed);
  if(start>end){alert("End date must be after start date.");return;}
  plannerData.months=[];
  let cur=new Date(start);
  while(cur<=end){
    const y=cur.getFullYear(),m=cur.getMonth();
    let monthObj=plannerData.months.find(x=>x.year===y&&x.month===m);
    if(!monthObj){monthObj={year:y,month:m,weeks:[],days:[]};plannerData.months.push(monthObj);}
    let lastWeek=monthObj.weeks[monthObj.weeks.length-1];
    if(!lastWeek||cur>lastWeek.end){
      let wStart=new Date(cur),wEnd=new Date(cur);wEnd.setDate(wStart.getDate()+6);
      const lastDayOfMonth=new Date(y,m+1,0);if(wEnd>lastDayOfMonth)wEnd=lastDayOfMonth;
      monthObj.weeks.push({start:wStart,end:wEnd,tasks:[],notes:''});
    }
    monthObj.days.push({date:new Date(cur),tasks:[],notes:''});
    cur.setDate(cur.getDate()+1);
  }
  document.getElementById("date-selection-page").classList.add("hidden");
  document.getElementById("planner-page").classList.remove("hidden");
  if(viewMode==="week")renderWeekPlannerAll();else renderDayPlannerAll();
}

function renderWeekPlannerAll(){
  const main=document.getElementById("planner");main.innerHTML='';
  document.getElementById("today-display").textContent="ðŸ“… Today: "+new Date().toLocaleDateString();
  let totalWeeks=0;plannerData.months.forEach(m=>totalWeeks+=m.weeks.length);
  document.getElementById("total-display").textContent=`Total Weeks: ${totalWeeks}`;
  let lastMonth=-1;
  plannerData.months.forEach(month=>{
    month.weeks.forEach((week,i)=>{
      if(month.month!==lastMonth){
        const mh=document.createElement("h2");mh.textContent=monthTitle(month.month,month.year);
        mh.style.fontWeight="bold";main.appendChild(mh);lastMonth=month.month;
      }
      const sec=document.createElement("div");sec.className='card';
      const h=document.createElement("h3");h.textContent=`Week ${i+1}: ${formatDateShort(week.start)} - ${formatDateShort(week.end)}`;
      sec.appendChild(h);renderTasks(sec,week.tasks,week);main.appendChild(sec);
    });
  });
}

function renderDayPlannerAll(){
  const main=document.getElementById("planner");main.innerHTML='';
  document.getElementById("today-display").textContent="ðŸ“… Today: "+new Date().toLocaleDateString();
  let totalDays=0;plannerData.months.forEach(m=>totalDays+=m.days.length);
  document.getElementById("total-display").textContent=`Total Days: ${totalDays}`;
  let dayCount=1,lastMonth=-1;
  plannerData.months.forEach(month=>{
    month.days.forEach(day=>{
      if(month.month!==lastMonth){
        const mh=document.createElement("h2");mh.textContent=monthTitle(month.month,month.year);
        mh.style.fontWeight="bold";main.appendChild(mh);lastMonth=month.month;
      }
      const sec=document.createElement("div");sec.className='card';
      const h=document.createElement("h3");h.textContent=`Day ${dayCount++}: ${formatDate(day.date)}`;
      sec.appendChild(h);renderTasks(sec,day.tasks,day);main.appendChild(sec);
    });
  });
}

function renderTasks(container,tasks,obj){
  const tasksDiv=document.createElement("div");
  tasks.forEach((t,i)=>{
    const row=document.createElement("div");row.className='task-row';
    const num=document.createElement("div");num.className='num';num.textContent=i+1;
    const input=document.createElement("input");input.type='text';input.value=t.text||'';
    input.onchange=()=>{t.text=input.value;saveData();}
    const del=document.createElement("button");del.textContent='ðŸ—‘';del.onclick=()=>{tasks.splice(i,1);refresh();saveData();}
    row.appendChild(num);row.appendChild(input);row.appendChild(del);tasksDiv.appendChild(row);
  });
  const addInput=document.createElement("input");addInput.type='text';addInput.placeholder="Enter new task...";
  const addBtn=document.createElement("button");addBtn.textContent="âž• Add Task";addBtn.className="add-btn";
  addBtn.onclick=()=>{
    if(addInput.value.trim()!==''){tasks.push({text:addInput.value});addInput.value='';refresh();saveData();}
  }
  tasksDiv.appendChild(addInput);tasksDiv.appendChild(addBtn);
  const notes=document.createElement("textarea");notes.rows=2;notes.placeholder="Add your notes...";
  notes.value=obj.notes||'';notes.onchange=()=>{obj.notes=notes.value;saveData();}
  container.appendChild(tasksDiv);container.appendChild(notes);
}
function refresh(){viewMode==="week"?renderWeekPlannerAll():renderDayPlannerAll();}
function saveData(){localStorage.setItem("plannerData",JSON.stringify(plannerData));}
function monthTitle(m,y){return new Date(y,m,1).toLocaleDateString(undefined,{month:'long',year:'numeric'});}
function formatDateShort(d){return d.toLocaleDateString(undefined,{day:'2-digit',month:'short',year:'numeric'});}
function formatDate(d){return d.toLocaleDateString(undefined,{day:'2-digit',month:'short',year:'numeric'});}
function exportToPDF(){
  const { jsPDF }=window.jspdf;const doc=new jsPDF();let y=10;
  doc.setFont("helvetica","bold");doc.setFontSize(16);doc.text(journeyTitle,10,y);y+=10;
  plannerData.months.forEach(month=>{
    doc.setFont("helvetica","bold");doc.setFontSize(14);doc.text(monthTitle(month.month,month.year),10,y);y+=8;
    const arr=viewMode==="week"?month.weeks:month.days;
    arr.forEach((obj,i)=>{
      doc.setFont("helvetica","bold");doc.setFontSize(12);
      const label=viewMode==="week"?`Week ${i+1}: ${formatDateShort(obj.start)} - ${formatDateShort(obj.end)}`:`Day ${i+1}: ${formatDate(obj.date)}`;
      doc.text(label,12,y);y+=6;
      obj.tasks.forEach((t,j)=>{doc.setFont("helvetica","normal");doc.text(`${j+1}. ${t.text}`,16,y);y+=6;});y+=4;
    });
  });doc.save("Planner.pdf");
}
function exportToWord(){
  let content=journeyTitle+"\n\n";
  plannerData.months.forEach(month=>{
    content+=monthTitle(month.month,month.year)+"\n";
    const arr=viewMode==="week"?month.weeks:month.days;
    arr.forEach((obj,i)=>{
      content+=viewMode==="week"?`Week ${i+1}: ${formatDateShort(obj.start)} - ${formatDateShort(obj.end)}\n`:`Day ${i+1}: ${formatDate(obj.date)}\n`;
      obj.tasks.forEach((t,j)=>{content+=`${j+1}. ${t.text}\n`;});content+="\n";
    });
  });
  const blob=new Blob(["\ufeff",content],{type:"application/msword"});saveAs(blob,"Planner.doc");
}
function resetAll(){if(confirm("Reset all data?")){plannerData={months:[]};location.reload();}}
function openCreator(){document.getElementById("creator-modal").classList.add("active");}
function closeCreator(e){if(e.target.id==="creator-modal")document.getElementById("creator-modal").classList.remove("active");}
</script>
</body>
</html>